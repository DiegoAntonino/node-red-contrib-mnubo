<script type="text/javascript">
   RED.nodes.registerType('SmartObjects owners',{
      category: 'mnubo',
      color: '#00a1e0',
      defaults: {
            name: {value:""},
            mnuboconfig: {value:"", type:"mnubo config", required:true},
            functionselection: {value:"create", required:true},
            inputtext: {value:"",type: 'text'},
      },
      inputs:1,
      outputs:1,
      icon: "Owner.png",
      label: function() {
            return this.name||"owner "+this.functionselection;
      },
      button: {
         onclick: function() {
               var label = this.name||"button";
               var node = this;
               $.ajax({
                  url: "owners/"+this.id+"/button",
                  type:"POST",
                  success: function(resp, textStatus, xhr) {
                     RED.notify(node._("local injection",{label:label}),"success");
                  },
                  error:  function(resp, textStatus, xhr) {
                     RED.notify(node._("local injection",{label:label}),"error");
                  }
               });
         }
      },
   });
</script>

<script type="text/x-red" data-template-name="SmartObjects owners">
   <div class="form-row">
      <label for="node-input-name"><i class="icon-tag"></i> Name</label>
      <input type="text" id="node-input-name" placeholder="Name">
   </div>
   <div class="form-row">
      <label for="node-input-mnuboconfig"><i class="fa fa-database"></i> mnubo config</label>
      <input type="text" id="node-input-mnuboconfig">
   </div>
   <div class="form-row">
      <label for="node-input-functionselection"><i class="fa fa-list"></i> Function</label>
         <select type="text" id="node-input-functionselection" style="width:72%;">
            <option value="create">Create</option>
            <option value="update">Update</option>
            <option value="delete">Delete</option>
            <option value="claim">Claim</option>
         </select>
   </div>
   <div class="form-row">
      <label for="node-input-inputtext"><i class="fa fa-pencil"></i> Input</label>
      <textarea id="node-input-inputtext" rows="10" cols="80" placeholder="optional input string"></textarea>
   </div>
</script>

<script type="text/x-red" data-help-name="SmartObjects owners">
   <p>This is a mnubo's SmartObjects Ingestion Owner node.</p>

   <p>There are 4 functionalities: </p>
   <ul>
     <p>
       <li><b>Create:</b> Allows to Create an Owner. The input is a valid JSON attributes list, with mandatory  "username" and "x_password" attribute></li>
     </p>
     <p>
       <li><b>Update:</b> Allows to Update an Owner's attributes. The input can be a "string" or "javascript's object".  It need to be an array that is compose of the following 2 elements:</li>
       <ul>
         <li>the owner's username</li>
         <li>JSON containing the owner's attributes.</li>
       </ul>
     </p>
     <p>
       <li><b>Delete:</b> Allows to Delete an Owner. The input is the owner "username".</li>
     </p>
     <p>
       <li><b>Claim:</b>Allows to an owner to Claim an Object. The input can be a "string" or "javascript's object".  It need to be an array that is compose of the following 2 elements:</li>
       <ul>
         <li>the owner's username</li>
         <li>the object's x_device_id</li>
       </ul>

     </p>
   </ul>

   <p>This node have 2 possible input:
     <ul>
        <li>you can press the button to inject the input, using this node optional input</li>
        <li>you can inject the input of a msg.payload</li>
     </ul>
   </p>

   <p>This node requires a mnubo configuration, with the following parameters:
     <ul>
       <p>
         <li><b>Environment</b> that can be:</p></li>
         <ul>
            <li><p><b>sandbox:</b>to connect to the mnubo's SmartObjects sandbox system.</p></li>
            <li><p><b>production:</b>to connect to the mnubo's SmartObjects production system.</p></li>
            <li><p><b>use Proxy URL:</b>If you need to connect to an alternate system, or you need to go through a proxy, you can use this field, it need to be a valid format (http://hostname:port).</p></li>
         </ul>
       </p>
       <p>
         <li><p><b>Client ID</b> need to be a valid Client's Key.</p></li>
       </p>
       <p>
         <li><p><b>Client Secret</b> need to be the valid Client's Secret.</p></li>
       </p>
     </ul>
   </p>

   <p>Refer to SmarObject's online documentation (under the API section) for details about this interface usage.</p>

   <p>To use the mnubo's SmartObjects nodes, you will need to have a valid mnubo account, with access granted on a namespace.  To obtain your unique namespace in the SmartObjects platform, contact sales@mnubo.com . Please use the subject title <b>node-red-contrinb-mnubo</b> and include in the body of the email the name of your company, contact name and phone number.</p>
</script>
